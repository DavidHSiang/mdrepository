---
title: 终于搞懂了回车与换行的区别
date: 2020-04-23 19:37:36
reward: true
declare: true
tags: 
	- 编程相关概念
categories: 
	- [计算机与操作系统,编程相关概念]
---

本文摘录自: 

[终于搞懂了回车与换行的区别](https://www.pythontab.com/html/2017/linuxkaiyuan_0115/1116.html):https://www.pythontab.com/html/2017/linuxkaiyuan_0115/1116.html

[回车与换行的区别](https://blog.csdn.net/u011982340/article/details/39268179):https://blog.csdn.net/u011982340/article/details/39268179

---

关于换行和回车其实平时我们不太在意，所以关于两者的区别也不太清楚，在平时开发时可能会遇到一些文件处理的问题，放到不同的操作系统上出现各种坑。那么回车和换行到底有哪些区别呢？今天咱们就来总结一下。

<!--more-->

## 1. 由来

在计算机还没有出现之前，有一种叫做电传打字机（Teletype Model 33）的机械打字机，每秒钟可以打10个字符。但是它有一个问题，就是打完一行换行的时候，要用去0.2秒，正好可以打两个字符。要是在这0.2秒里面，又有新的字符传过来，那么这个字符将丢失。

于是，研制人员想了个办法解决这个问题，就是在每行后面加两个表示结束的字符。一个叫做“回车”，告诉打字机把打印头定位在左边界，不卷动滚筒；另一个叫做“换行”，告诉打字机把滚筒卷一格，不改变水平位置。

这就是“换行”和“回车”的由来。

## 2. 使用

后来，计算机发明了，这两个概念也就被般到了计算机上。那时，存储器很贵，一些科学家认为在每行结尾加两个字符太浪费了，加一个就可以。于是，就出现了分歧。

回车 \r 本义是光标重新回到本行开头，r的英文return，控制字符可以写成CR，即Carriage Return

换行 \n 本义是光标往下一行（不一定到下一行行首），n的英文newline，控制字符可以写成LF，即Line Feed

| 符号 | ASCII码 | 意义   |
| ---- | ------- | ------ |
| \n   | 10      | 换行NL |
| \r   | 13      | 回车CR |

在不同的操作系统这几个字符表现不同，比如在WIN系统下，这两个字符就是表现的本义。在UNIX类系统，换行\n就表现为光标下一行并回到行首。在MAC OS X以前，\r就表现为回到本行开头并往下一行，至于ENTER键的定义是与操作系统有关的。通常用的Enter是两个加起来, MAC OS X与Unix相同。

不同操作系统下的含义：

* ``\n``:  UNIX 、Linux、Mac OS X 系统行末结束符

* ``\n\r``: window 系统行末结束符

* ``\r``:  MAC OS X以前 系统行末结束符

我们经常遇到的一个问题就是，Unix/Mac系统下的文件在Windows里打开的话，所有文字会变成一行；而Windows里的文件在Unix/Mac下打开的话，在每行的结尾可能会多出一个^M符号。

## 3. 软回车和硬回车

再扩展一下回车的一些知识。

硬回车就是普通我们按回车产生的，它在换行的同时也起着段落分隔的作用。 

软回车是用 Shift + Enter 产生的，它换行，但是并不换段，即前后两段文字在 Word 中属于同一“段”。在应用格式时你会体会到这一点。

软回车能使前后两行的行间距大幅度缩小，因为它不是段落标记，要和法定的段落标记——硬回车区别出来。硬回车的html代码是``<p>..</p>``，段落的内容就夹在里面，而软回车的代码很精悍：``<br>``。网页的文字如果复制到word中，则硬回车变为弯曲的箭头，软回车变为向下的箭头。

## 4.编程中的回车与换行

在编程时, 为了程序的可移植性, 编译器或解释器会帮我们完成不同行末结束符之间的转换.

在编程时, \n 表示光标移动到**下行首**, \r 表示 光标移动到**本行首**

**例如**: 

c++语言编程时（windows系统）

\r 就是回到本行行首, 这就会把这一行以前的输出覆盖掉, 如：

```c
int main() {
cout << "hahaha" << "\r" << "xixi" ;
}
```

最后只显示 ``xixi`` ,而 ``hahaha ``被覆盖了

\n 是**回车＋换行** 把光标先移到行首, 然后换到下一行, 也就是 下一行的行首

```c
int main() {
cout << "hahaha" << "\n" << "xixi" ;
}
```


则显示:

```
hahaha
xixi
```

**这是因为**: 在windows中当我们用fopen打开文本文件，从中读到**\r\n**时，流会转换为**\n**，而当我们往文件中写入**\n**时流会转换为**\r\n**。当我们向控制台输出**\n**时，流将之转换为**\r\n**再传递至内核，**这也是为什么我们使用'\n'可以实现回车+换行的效果，虽然'\n'的本意只是换行**！。